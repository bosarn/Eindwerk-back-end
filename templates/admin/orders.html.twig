{% extends 'base.html.twig' %}
{% block body %}
            {% if is_granted('IS_AUTHENTICATED_FULLY') %}
                <p>Email: {{ app.user.email }}</p>
            {% endif %}

        <h2>Total orders: {{ orders | length }}</h2>
<div class="container">
        {% for printer in printers %}
            <div class="box">

                <h3>{{ printer.name }}</h3>
                    Status: {{ printer.status }}
                    Location: {{ printer.location }}
                    {{ printer.id }}

            </div>
        {% endfor %}
    </div>
        <div class="container">
            {% for order in orders %}
                {%if loop.index < 6  %}
            <ul>
                <h3>Order {{ order.id }} | {{ order.date | date ('d/m/Y') }} </h3>

                <li> User Name: {{ order.user.name }}</li>
                {% for object in order.Allobjects %}
                <h3>Object:</h3>
                <h4> {{ object.name }}
                    {% for detail in object.details %}
                        {% if  order.id == detail.orders.id %}
                :  {{ detail.quantity }}</h4>
                        {% endif %}
                    {% endfor %} <!--Detail end-->



                    {% for file in object.files %}
                        <li> {{ file.name }}</li>
                        <form method="post" action="{{ path('send_file_to_printer')}}">
                            <label for="file_id">
                                <input name="file_id" value="{{ file.id }}" hidden>
                            </label>
                            <label for="printer_select">
                                Printer
                                <select name="printer_select">
                                    {% for printer in printers %}
                                    <option name="printer_select"> {{ printer.id }}: {{ printer.name }}</option>
                                    {% endfor %}
                                </select>
                            </label>
                            <input type="submit" value="Print">
                        </form>
                    {% endfor %} <!--File end-->
                {% endfor %}<!--Object end-->

                <form method="post" action="{{ path('download_invoice', {'id': order.id })}}">
                    <label for="order_id">
                        <input name="order_id" value="{{ order.id }}" hidden>
                    </label>
                    <input type="submit" value="Invoice">
                </form>
            </ul>
                {% endif %}
        {% endfor %} <!--Order end-->

        </div>


{% endblock %}