{% extends 'base.html.twig' %}

{% block body %}
    <div class="container">
        <div class="row">
            {% if is_granted('IS_AUTHENTICATED_FULLY') %}
                <p>Email: {{ app.user.email }}</p>
            {% endif %}


        </div>
        <div>
            Total orders: {{ orders | length }}
            {% for order in orders %}
                {%if loop.index < 6  %}
            <ul>
                Order {{ order.id }} | {{ order.date | date ('d/m/Y') }}
                {{ order.status }}
                {{ order.shippingAdress }}

                <li> User Name: {{ order.user.name }}</li>
                {% for object in order.Allobjects %}

                <li>  Objectname: {{ object.name }}:
                    {% for detail in object.details %}
                        {% if  order.id == detail.orders.id %}
                            {{ detail.quantity }}
                        {% endif %}
                    {% endfor %} <!--Detail end-->
                </li>

                    Files:
                    {% for file in object.files %}
                        <li> {{ file.name }}</li>
                        <form method="post" action="{{ path('send_file_to_printer')}}">
                            <label for="file_id">
                                <input name="file_id" value="{{ file.id }}" hidden>
                            </label>
                            <label for="printer_select">
                                Printer
                                <select name="printer_select">
                                    {% for printer in printers %}
                                    <option name="printer_select"> {{ printer.id }}: {{ printer.name }}</option>
                                    {% endfor %}
                                </select>
                            </label>
                            <input type="submit" value="Print">
                        </form>
                    {% endfor %} <!--File end-->
                {% endfor %}<!--Object end-->
            </ul>
                <li> Order invoice: {{ order.invoice }}</li>
                <a href="{{ path('download_invoice', {'id': order.id }) }}">Print invoice </a>
                <hr>
                {% endif %}
        {% endfor %} <!--Order end-->

        </div>

    </div>
{% endblock %}